TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`%` TRIGGER `before_insert` BEFORE INSERT ON `user_data` FOR EACH ROW BEGIN\n  IF NOT NEW.password REGEXP \'^[a-zA-Z0-9]{8,15}$\' THEN\n    SIGNAL SQLSTATE \'45000\' SET MESSAGE_TEXT = \'Password must be between 8 and 15 characters and contain only letters and numbers.\';\n  END IF;\n\nIF NOT NEW.username REGEXP \'^[a-zA-Z0-9]{8,15}$\' THEN\n        SIGNAL SQLSTATE \'45000\' \n        SET MESSAGE_TEXT = \'Username must be between 8 and 15 characters and contain no special characters.\';\n    END IF;\n\nIF NOT NEW.email REGEXP \'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,}$\' THEN\n    SIGNAL SQLSTATE \'45000\' \n    SET MESSAGE_TEXT = \'Email is not valid.\';\nEND IF;\n\nEND' 'CREATE DEFINER=`root`@`%` TRIGGER after_user_data_insert\nAFTER INSERT ON user_data\nFOR EACH ROW\nBEGIN\n  INSERT INTO user_info (user_id, display_name)\n  VALUES (NEW.id, \'little monkey\');\nEND' 'CREATE DEFINER=`root`@`%` TRIGGER before_update\nBEFORE UPDATE ON user_data\nFOR EACH ROW\nBEGIN\n	IF NOT NEW.password REGEXP \'^[a-zA-Z0-9]{8,15}$\' THEN\n        SIGNAL SQLSTATE \'45000\' \n        SET MESSAGE_TEXT = \'Password must be between 8 and 15 characters and contain only letters and numbers.\';\n    END IF;\n    \n    IF NOT NEW.email REGEXP \'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,}$\' THEN\n        SIGNAL SQLSTATE \'45000\' \n        SET MESSAGE_TEXT = \'Email is not valid.\';\n    END IF;\nEND' 'CREATE DEFINER=`root`@`%` TRIGGER `before_update_role` BEFORE UPDATE ON `user_data` FOR EACH ROW BEGIN\n    	IF NEW.role != \'publisher\' AND NEW.role != \'manager\' THEN\n        	SIGNAL SQLSTATE \'45000\' SET MESSAGE_TEXT = \'Role phai la publisher hoac manager\';\n        END IF;\n    END' 'CREATE DEFINER=`root`@`%` TRIGGER before_delete\nAFTER DELETE ON user_data\nFOR EACH ROW\nBEGIN\n    IF OLD.role = \'manager\' THEN\n    	SIGNAL SQLSTATE \'45000\' \n        SET MESSAGE_TEXT = \'Manager khong the bi xoa\';\n    END IF;\nEND'
sql_modes=1436549152 1436549152 1436549152 1436549152 1436549152
definers='root@%' 'root@%' 'root@%' 'root@%' 'root@%'
client_cs_names='utf8mb4' 'utf8mb4' 'utf8mb4' 'utf8mb4' 'utf8mb4'
connection_cl_names='utf8mb4_unicode_ci' 'utf8mb4_unicode_ci' 'utf8mb4_unicode_ci' 'utf8mb4_unicode_ci' 'utf8mb4_unicode_ci'
db_cl_names='latin1_swedish_ci' 'latin1_swedish_ci' 'latin1_swedish_ci' 'latin1_swedish_ci' 'latin1_swedish_ci'
created=173113258299 173113260954 173090896951 173113229780 173113978834
